# OPNet-CLI

![Bitcoin](https://img.shields.io/badge/Bitcoin-000?style=for-the-badge&logo=bitcoin&logoColor=white)
![C#](https://img.shields.io/badge/c%23-%23239120.svg?style=for-the-badge&logo=csharp&logoColor=white)
![.Net](https://img.shields.io/badge/.NET-5C2D91?style=for-the-badge&logo=.net&logoColor=white)
![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)
![NPM](https://img.shields.io/badge/NPM-%23CB3837.svg?style=for-the-badge&logo=npm&logoColor=white)

## Introduction

**OPNet-cli** is a .NET Core CLI utility designed to streamline the creation, management, and deployment of OP20 contracts and others. It allows developers to initialize projects, create OP20 token contracts, and manage contract deployment through a simple command-line interface. The tool supports cross-platform environments and ensures that contract development is efficient and straightforward.


## Requirements:
	On Windows:
		- The .NET Core Framework version 8. You can download it from the official link below: https://aka.ms/dotnet-core-applaunch?missing_runtime=true&arch=x64&rid=win-x64&os=win10&apphost_version=8.0.6
	
	On All Operating Systems:
		- npm
		- node.js
		- gulp
		- Rust

## Installation:
-> There is no installer for now. <-

	Clone the git repo.
		1. See the build.md file on how to build from the source code.
		2. Copy the files and folders generated by the build into a location of your choice, or use it from there.
	
	or

	Download a release and unzip to a foler of your choice.
	
## Linux and macOS:
	- Open a shell (command prompt).
	- Give the execute permission by executing the following command: chmod +x opnetcli

## Usage Notes:
	- When setting a parameter value that contains spaces, enclose the value in double quotation marks "".
	- Parameters marked with * are mandatory.

## Commands:

### 1. createcontract
	Create a generic contract project. The project includes:
		- Contract source files.
		- Deployment files.
		- Unit tests.

	Parameters:
		*contractname: The name of the contract.
		contractpath: The path where the contract files will be stored. If not specified, the current directory is used. (optional)

	Example:
	opnetcli createcontract -contractname:test -contractpath:c:/temp/contracts

### 2. createtoken
	Create a basic token project. The project includes:
		- Contract source files.
		- Deployment files.
		- Unit tests.

	Parameters:
		*contractname: The name of the contract.
		contractpath: The path where the contract files will be stored. If not specified, the current directory is used. (Optional)
		*tokenname: The name of the token.
		*tokensymbol: The token symbol.
		*tokendecimals: The number of decimals for the token.
		*tokenmaxsupply: The maximum supply of the token.
		
	Example:
	opnetcli createtoken -contractname:TestToken -contractpath:c:/temp/contracts -tokenname:TestToken -tokensymbol:TSTTKN -tokendecimals:18 -tokenmaxsupply:10000000

### 3. deploy
	Display the deployment steps.


## Deployment:
	The following steps outline the process to deploy a WebAssembly (WASM) contract using the OPNETCLI tool. The WASM file to be deployed is located in the build folder of your contract.

	Overview of Key Files:
		- config.ts: This file contains the deployment configuration information, such as the network provider, the network to deploy on, and the wallet's private key.
		- deploy.ts: This script is responsible for launching the deployment process.
	
	Steps:
		1.Navigate to the deploy Folder:
			- Open your terminal or command prompt.
			- Change the current directory to the deploy folder where the deployment scripts are located.
	
		2. Configure the Deployment Settings:
			- Using a text editor, open the config.ts file located in the deploy/src folder.
				Modify the following settings:
					- OPNET_PROVIDER: Set this to the desired provider.
					- NETWORK: Set this to the appropriate network.
					- PRIVATE_KEY: Replace the placeholder 'YOUR PRIVATE KEY HERE' with your actual wallet's private key.
				Save the config.ts file after making the changes.
	
		3. Install Dependencies:
			In the terminal or command prompt, run the following command to install the necessary dependencies:
				npm install

		4. Build the Deployment Scripts:
			After installing dependencies, run the following command to build the deployment scripts:
				gulp

		5. Navigate Back to the Contractâ€™s Main Folder:
			Change the directory back to the main folder of your contract.

		6. Deploy the Contract:
			Run the following command to deploy the contract:
				node ./deploy/build/deploy.js
			This command executes the deployment script, which will deploy your WASM contract to the specified network using the configuration settings you provided.

	Important Warnings:

		Security of Your Private Key:
			- Do not leave your wallet private key exposed in the config.ts file. After deploying the contract, immediately remove your private key from this file.
			- Ensure that the config.ts file is not pushed to any public or private repository without first removing the private key.


## Unit Testing:
	When you generate a contract project using the OPNETCLI tool, a basic unit testing framework is automatically generated. This framework provides the initial structure for testing your smart contract, but it needs to be manually completed to include all the necessary test cases.

	Steps to Complete the Unit Tests:

	1. Basic Unit Test Structure:
		- The generated unit test framework includes placeholder test cases. These serve as a starting point, but you need to manually implement and expand upon them to cover all the functionality of your contract.
		- The unit tests are located in the src/tests folder. Inside this folder, there is a file named after your contract (e.g., MyContract.ts). This file is where you'll write your tests.

	2. Contract WASM File:
		Before running the unit tests, ensure that the WASM file of the contract you wish to test is copied into the bytecode folder within the unittests directory.
		This step is crucial because the unit tests require the compiled WASM file to execute and validate the contract's behavior.

	3. Updating config.ts:
		The configs.ts file, located in the src/contracts folder, must be updated to set the appropriate value for the NETWORK field. This configuration determines which network the tests are run against (e.g., testnet, mainnet).

	4. Implementing the Contract Interface:
		In the src/contracts folder, there is a file named after your contract (e.g., MyContract.ts). This file needs to be coded to accurately reflect the methods of your contract.
		Detailed comments are provided in the code to guide you through the process. This class serves as a bridge, enabling you to call the actual contract methods from your unit tests.

		Basic Implementation Steps:
			- Create Interfaces: Define interfaces for all event classes and data classes declared in your smart contract using the provided template.
			- Create Decoders: Implement decoders for all event classes and data classes declared in your smart contract using the provided template.
			- Create Selector Methods: Develop selector methods for all exposed methods of the contract using the provided template.
			- Create Method Wrappers: Implement methods for all exposed contract methods, following the template provided.

	5. Writing the Unit Tests:
		In the src/tests folder, the file named after your contract (e.g., MyContract.ts) contains the initial structure for unit tests.
		Use the provided examples to create comprehensive tests for all functionalities of your contract.
		Refer to the Assert.ts and Assertion.ts files, located in the src/opnet/unit folder, to see the available assertion functions that you can use to validate your test outcomes.

	Additional Information:
		- Documentation: More detailed documentation and examples of unit testing will be published on the website in the future.
		- Continuous Testing: Regularly update and expand your unit tests as your contract evolves. This practice ensures that all aspects of your contract are tested thoroughly and any changes do not introduce unexpected behavior.

## License

This project is licensed under the MIT License. View the full license [here](https://github.com/your-org/opnet-cli/blob/main/LICENSE).

---

This README provides all necessary details for developers to get started with OPNet-cli, create and deploy OP20 contracts, and manage unit testing for their smart contracts.
